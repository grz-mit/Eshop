@model IEnumerable<Eshop.Models.ReceivedMessageModel>
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1 class="title-font">Otrzymane wiadomości</h1>

<div style="padding-bottom: 15px;">
    <a class="btn btn-dark" asp-controller="Messages" asp-action="Received">Otrzymane</a>
    <a class="btn btn-dark" asp-controller="Messages" asp-action="Sent">Wysłane</a>
</div>

@if (Model.Count() > 0)
{
 <div class="messages">
    @foreach (var item in Model)
    {
        <div data-href="ReceivedDetails/@item.Id" class="message-row">
            <div class="message-user-name">
                <p>Od: @item.SenderName</p>
            </div>
            <div class="message-title">
                <p>@item.MessageTitle</p>
            </div>
            <div class="message-date">
                <p>@item.SentDate.ToString("g")</p>
            </div>
        </div>
    }
 </div>
}
else
{
    <hr />
    <p>Brak otrzymanych wiadomości.</p>
}

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const rows = document.querySelectorAll("div[data-href]");

        rows.forEach(row => {
            row.addEventListener("click", () => {
                window.location.href = row.dataset.href;
            })
        })
    })
</script>
